<div class="custom-ajax-addtocart">
  {% for variant in product.variants %}
  <input type="hidden" id="getvarid" value="{{ variant.id }}">
    {% endfor %}
  <button type="button" name="add" id="collection-cart-{{ product.id }}"> add to cart</button>
</div>
{% comment %}
<script>
  $(document).on('click', '#collection-cart-{{ product.id }}', function(){
    let vargetid = $(this).parents('.custom-ajax-addtocart').find('#getvarid').val();
    //console.log('ok:'+ vargetid);
    let formobj = {
      quantity: 1,
      id: vargetid
    };
    $.ajax({
      type: "POST",
      url: "/cart/add.js",
      cache: false,
      data: formobj,
      dataType: "json",
      success: function(data){
        console.log('product add to cart success');
        $('.cart-count-bubble').click();
        $('cart-drawer').removeClass('is-empty');
        $('.drawer__inner-empty').hide();
        $('cart-drawer').load(location.href + "#CartDrawer");
        
      },
      error: function(xhr, ajaxOption, thrownError){
        console.log("error in adding product");
      }
    });
 
  });

</script>
{% endcomment %}